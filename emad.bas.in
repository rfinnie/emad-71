REM SPDX-FileComment: emad for OS/8 BASIC
REM SPDX-FileCopyrightText: Copyright (C) 2021 Ryan Finnie
REM SPDX-License-Identifier: MPL-2.0
RANDOMIZE
REM Play field is random (8-12)x(6-10), inclusive
LET SX=INT(RND(X)*5)+8
LET SY=INT(RND(X)*5)+6
LET X=INT(RND(X)*SX)+1
LET Y=INT(RND(X)*SY)+1
PRINT "MISS CLEO HAS PUT EMAD IN A MINDJAIL,"
PRINT "WHICH IS A PRISON FOR YOUR MIND."
PRINT "IT IS YOUR JOB TO GET HIM OUT!"
@MAINLOOP@
PRINT ""
IF Y = 1 GOTO @WALLNORTH@
IF Y = SY GOTO @WALLSOUTH@
IF X = 1 GOTO @WALLWEST@
IF X = SX GOTO @WALLEAST@
GOTO @WALLNONE@
@INPUT@
INPUT C$
IF SEG$(C$,0,4) = "GO N" GOTO @GONORTH@
IF SEG$(C$,0,4) = "GO S" GOTO @GOSOUTH@
IF SEG$(C$,0,4) = "GO W" GOTO @GOWEST@
IF SEG$(C$,0,4) = "GO E" GOTO @GOEAST@
IF SEG$(C$,0,2) = "QU" GOTO @TRAPPED@
IF SEG$(C$,0,2) = "EX" GOTO @TRAPPED@
IF SEG$(C$,0,2) = "ST" GOTO @TRAPPED@
IF SEG$(C$,0,2) = "BY" GOTO @TRAPPED@
PRINT "EMAD LOOKS AROUND, CONFUSED."
PRINT ""
PRINT "TRY GOING IN A CARDINAL DIRECTION."
GOTO @MAINLOOP@
@GONORTH@
IF Y = 1 GOTO @TRAPPED@
PRINT "EMAD HEADS NORTH INTO THE BLACK."
LET Y=Y-1
IF Y = 1 GOTO @WALLHIT@
GOTO @MAINLOOP@
@GOSOUTH@
IF Y = SY GOTO @TRAPPED@
PRINT "EMAD HEADS SOUTH INTO THE BLACK."
LET Y=Y+1
IF Y = SY GOTO @WALLHIT@
GOTO @MAINLOOP@
@GOWEST@
IF X = 1 GOTO @TRAPPED@
PRINT "EMAD HEADS WEST INTO THE BLACK."
LET X=X-1
IF X = 1 GOTO @WALLHIT@
GOTO @MAINLOOP@
@GOEAST@
IF X = SX GOTO @TRAPPED@
PRINT "EMAD HEADS EAST INTO THE BLACK."
LET X=X+1
IF X = SX GOTO @WALLHIT@
GOTO @MAINLOOP@
@TRAPPED@
PRINT ""
IF RND(X) >= .5 GOTO @TRAPPEDRAND1@
PRINT "HE IS TRAPPED!"
GOTO @MAINLOOP@
@TRAPPEDRAND1@
PRINT "GET HIM OUT!"
GOTO @MAINLOOP@
@WALLHIT@
PRINT ""
PRINT "HE HAS HIT A WALL."
GOTO @MAINLOOP@
@WALLNONE@
PRINT "A FIELD OF DARKNESS EXTENDS"
PRINT "IN ALL DIRECTIONS."
GOTO @INPUT@
@WALLNORTH@
PRINT "THE NORTHERN WALL OF THE MINDJAIL"
PRINT "IS DIRECTLY IN FRONT OF EMAD."
GOTO @INPUT@
@WALLSOUTH@
PRINT "THE SOUTHERN WALL OF THE MINDJAIL"
PRINT "IS DIRECTLY IN FRONT OF EMAD."
GOTO @INPUT@
@WALLWEST@
PRINT "THE WESTERN WALL OF THE MINDJAIL"
PRINT "IS DIRECTLY IN FRONT OF EMAD."
GOTO @INPUT@
@WALLEAST@
PRINT "THE EASTERN WALL OF THE MINDJAIL"
PRINT "IS DIRECTLY IN FRONT OF EMAD."
GOTO @INPUT@
END
